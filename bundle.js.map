{"version":3,"file":"bundle.js","sources":["index.ts"],"sourcesContent":["import * as path from 'path'\nimport * as fs from 'fs'\n\nconst lessOrScss = (src: string, name: string, ext: string) => {\n    const content = src.replace(/<([^<>]*)>/g, (v) => {\n        const [className] = v.match(/className={?[\"|'].+['|\"]}?/g) || []\n        if (className) {\n            const [_, item] = /[\"|'](.+)['|\"]/g.exec(v) || []\n            if (item) {\n                const arr = item.split(\" \")\n                let str = ''\n                arr.forEach(item => {\n                    str += `\\${styles['${item}']} `\n                })\n                return v.replace(/className={?[\"|'].+['|\"]}?/g, `className={\\`${str}\\`}`)\n            }\n        }\n        return v\n    })\n    const result = `import styles from './${name}.${ext}';${content}`;\n    return result;\n}\n\nexport default function (this: any, src: string) {\n    if (this.cacheable) {\n        this.cacheable();\n    }\n    const resourcePath = path.parse(this.resourcePath);\n    const { name } = resourcePath;\n    const { mode } = this.query\n    if (fs.existsSync(path.join(resourcePath.dir, `${name}.less`))) {\n        return mode === 'module' ? lessOrScss(src, name, 'less') : `${src};require('./${name}.less')`;\n    }\n    if (fs.existsSync(path.join(resourcePath.dir, `${name}.scss`))) {\n        return mode === 'module' ? lessOrScss(src, name, 'scss') : `${src};require('./${name}.scss')`;\n    }\n    if (fs.existsSync(path.join(resourcePath.dir, `${name}.css`))) {\n        return mode === 'module' ? lessOrScss(src, name, 'css') : `${src};require('./${name}.css')`;\n    }\n    return src;\n};\n"],"names":["lessOrScss","src","name","ext","replace","v","className","match","_","item","exec","arr","split","str","forEach","this","cacheable","resourcePath","path","parse","mode","query","fs","existsSync","join","dir"],"mappings":"ulBAGA,MAAMA,EAAa,CAACC,EAAaC,EAAcC,IAgB5B,yBAAyBD,KAAQC,MAfhCF,EAAIG,QAAQ,eAAgBC,IACxC,MAAOC,GAAaD,EAAEE,MAAM,gCAAkC,GAC9D,GAAID,EAAW,CACX,MAAOE,EAAGC,GAAQ,kBAAkBC,KAAKL,IAAM,GAC/C,GAAII,EAAM,CACN,MAAME,EAAMF,EAAKG,MAAM,KACvB,IAAIC,EAAM,GAIV,OAHAF,EAAIG,SAAQL,IACRI,GAAO,cAAcJ,WAElBJ,EAAED,QAAQ,8BAA+B,gBAAgBS,SAGxE,OAAOR,cAMD,SAAsBJ,GAC5Bc,KAAKC,WACLD,KAAKC,YAET,MAAMC,EAAeC,EAAKC,MAAMJ,KAAKE,eAC/Bf,KAAEA,GAASe,GACXG,KAAEA,GAASL,KAAKM,MACtB,OAAIC,EAAGC,WAAWL,EAAKM,KAAKP,EAAaQ,IAAK,GAAGvB,WAC7B,WAATkB,EAAoBpB,EAAWC,EAAKC,EAAM,QAAU,GAAGD,gBAAkBC,WAEhFoB,EAAGC,WAAWL,EAAKM,KAAKP,EAAaQ,IAAK,GAAGvB,WAC7B,WAATkB,EAAoBpB,EAAWC,EAAKC,EAAM,QAAU,GAAGD,gBAAkBC,WAEhFoB,EAAGC,WAAWL,EAAKM,KAAKP,EAAaQ,IAAK,GAAGvB,UAC7B,WAATkB,EAAoBpB,EAAWC,EAAKC,EAAM,OAAS,GAAGD,gBAAkBC,UAE5ED"}